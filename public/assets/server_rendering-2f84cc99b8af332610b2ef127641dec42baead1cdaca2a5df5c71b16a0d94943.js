function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom"),require("react-dom/server")):"function"==typeof define&&define.amd?define(["react","react-dom","react-dom/server"],t):"object"==typeof exports?exports.ReactRailsUJS=t(require("react"),require("react-dom"),require("react-dom/server")):e.ReactRailsUJS=t(e.React,e.ReactDOM,e.ReactDOMServer)}(this,function(__WEBPACK_EXTERNAL_MODULE_3__,__WEBPACK_EXTERNAL_MODULE_4__,__WEBPACK_EXTERNAL_MODULE_5__){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(module,exports){var topLevel="undefined"==typeof window?this:window;module.exports=function(className){var constructor;return constructor=topLevel[className],constructor||(constructor=eval(className)),constructor&&constructor["default"]&&(constructor=constructor["default"]),constructor}},function(e,t,n){var r=n(7),o=n(8),i=n(9),s=n(11),a=n(10);e.exports=function(e){e.handleEvent&&("undefined"!=typeof Turbolinks.EVENTS&&a.teardown(e),i.teardown(e),s.teardown(e),o.teardown(e),r.teardown(e)),e.jQuery?(e.handleEvent=function(t,n){e.jQuery(document).on(t,n)},e.removeEvent=function(t,n){e.jQuery(document).off(t,n)}):"addEventListener"in window?(e.handleEvent=function(e,t){document.addEventListener(e,t)},e.removeEvent=function(e,t){document.removeEventListener(e,t)}):(e.handleEvent=function(e,t){window.attachEvent(e,t)},e.removeEvent=function(e,t){window.detachEvent(e,t)}),"undefined"!=typeof Turbolinks&&Turbolinks.supported?"undefined"!=typeof Turbolinks.EVENTS?a.setup(e):"undefined"!=typeof Turbolinks.controller?i.setup(e):s.setup(e):"undefined"!=typeof $&&"function"==typeof $.pjax?o.setup(e):r.setup(e)}},function(e,t,n){var r=n(0),o=n(12);e.exports=function(e){var t=o(e);return function(e){var n;try{n=t(e)}catch(t){try{n=r(e)}catch(e){console.error(t),console.error(e)}}return n}}},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE_3__},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE_4__},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE_5__},function(e,t,n){var r=n(3),o=n(4),i=n(5),s=n(1),a=n(0),c=n(2),l={CLASS_NAME_ATTR:"data-react-class",PROPS_ATTR:"data-react-props",jQuery:"undefined"!=typeof window&&"undefined"!=typeof window.jQuery&&window.jQuery,findDOMNodes:function(e){var t,n,r=l.CLASS_NAME_ATTR;switch(typeof e){case"undefined":t="["+r+"]",n=document;break;case"object":t="["+r+"]",n=e;break;case"string":t=e+"["+r+"], "+e+" ["+r+"]",n=document}return l.jQuery?l.jQuery(t,n):n.querySelectorAll(t)},getConstructor:a,useContext:function(e){this.getConstructor=c(e)},serverRender:function(e,t,n){var o=this.getConstructor(t),s=r.createElement(o,n);return i[e](s)},mountComponents:function(e){for(var t=l,n=t.findDOMNodes(e),i=0;i<n.length;++i){var s=n[i],a=s.getAttribute(t.CLASS_NAME_ATTR),c=t.getConstructor(a),u=s.getAttribute(t.PROPS_ATTR),d=u&&JSON.parse(u);if(!c){var m="Cannot find component: '"+a+"'";throw console&&console.log&&console.log("%c[react-rails] %c"+m+" for element","font-weight: bold","",s),new Error(m+". Make sure your component is available to render.")}o.render(r.createElement(c,d),s)}},unmountComponents:function(e){for(var t=l.findDOMNodes(e),n=0;n<t.length;++n){var r=t[n];o.unmountComponentAtNode(r)}},detectEvents:function(){s(this)}};l.handleMount=function(e){var t=undefined;e&&e.target&&(t=e.target),l.mountComponents(t)},l.handleUnmount=function(e){var t=undefined;e&&e.target&&(t=e.target),l.unmountComponents(t)},"undefined"!=typeof window&&l.detectEvents(),self.ReactRailsUJS=l,e.exports=l},function(e){e.exports={setup:function(e){e.jQuery?e.handleEvent("ready",e.handleMount):"addEventListener"in window?e.handleEvent("DOMContentLoaded",e.handleMount):e.handleEvent("onload",e.handleMount)},teardown:function(e){e.removeEvent("ready",e.handleMount),e.removeEvent("DOMContentLoaded",e.handleMount),e.removeEvent("onload",e.handleMount)}}},function(e){e.exports={setup:function(e){e.handleEvent("ready",e.handleMount),e.handleEvent("pjax:end",e.handleMount),e.handleEvent("pjax:beforeReplace",e.handleUnmount)},teardown:function(e){e.removeEvent("ready",e.handleMount),e.removeEvent("pjax:end",e.handleMount),e.removeEvent("pjax:beforeReplace",e.handleUnmount)}}},function(e){e.exports={setup:function(e){e.handleEvent("DOMContentLoaded",e.handleMount),e.handleEvent("turbolinks:render",e.handleMount),e.handleEvent("turbolinks:before-render",e.handleUnmount)},teardown:function(e){e.removeEvent("DOMContentLoaded",e.handleMount),e.removeEvent("turbolinks:render",e.handleMount),e.removeEvent("turbolinks:before-render",e.handleUnmount)}}},function(e){e.exports={setup:function(e){e.handleEvent(Turbolinks.EVENTS.CHANGE,e.handleMount),e.handleEvent(Turbolinks.EVENTS.BEFORE_UNLOAD,e.handleUnmount)},teardown:function(e){e.removeEvent(Turbolinks.EVENTS.CHANGE,e.handleMount),e.removeEvent(Turbolinks.EVENTS.BEFORE_UNLOAD,e.handleUnmount)}}},function(e){e.exports={setup:function(e){Turbolinks.pagesCached(0),e.handleEvent("page:change",e.handleMount),e.handleEvent("page:receive",e.handleUnmount)},teardown:function(e){e.removeEvent("page:change",e.handleMount),e.removeEvent("page:receive",e.handleUnmount)}}},function(e){e.exports=function(e){return function(t){var n=t.split("."),r=n.shift(),o=n,i=e("./"+r);return o.forEach(function(e){i=i[e]}),i.__esModule&&(i=i["default"]),i}}}])});var Main=React.createClass({displayName:"Main",getInitialState:function(){return{notes:[],writableNotes:[],readableNotes:[],permissions:[]}},componentDidMount:function(){var e=this;$.getJSON("/api/notes.json",function(t){e.setState({notes:t.notes,writableNotes:t.writable,readableNotes:t.readable})}),$.getJSON("/api/permissions.json",function(t){e.setState({permissions:t})})},noteDeleted:function(e){_this=this,$.ajax({url:"/api/notes/"+e,type:"DELETE",success:function(){_this.removeNote(e)}})},noteEdited:function(e,t){var n=this;$.ajax({url:"/api/notes/"+e.id,type:"PUT",data:{note:e},success:function(){n.updateNote(e,t)}})},permissionEdited:function(e){var t=this;$.ajax({url:"/api/permissions/"+e.id,type:"PUT",data:{permission:e},success:function(e){t.updatePermission(e)}})},permissionDeleted:function(){_this=this,$.ajax({url:"/api/permissions/"+id,type:"DELETE",success:function(){_this.removePermission(id)}})},removeNote:function(e){var t=this.state.notes.filter(function(t){return t.id!=e});this.setState({notes:t})},receiveNote:function(e){var t=this.state.notes.concat(e);this.setState({notes:t})},updateNote:function(e,t){var n=this.state[t].filter(function(t){return t.id!=e.id});n.push(e),this.setState(_defineProperty({},t,n))},receivePermission:function(e){var t=this.state.permissions.concat(e);this.setState({permissions:t})},removePermission:function(e){var t=this.state.permissions.filter(function(t){return t.id!=e});this.setState({permissions:t})},updatePermission:function(e){var t=this.state.permissions.filter(function(t){return t.id!=e.id});t.push(e),this.setState({permissions:t})},render:function(){return React.createElement("div",null,React.createElement("h1",{className:"col-lg-12 bg-primary display-2"},"Notes Application"),React.createElement("h2",null,"Add A Note"),React.createElement(NewNote,{receiveNote:this.receiveNote}),React.createElement("h2",null,"My Notes"),React.createElement(AllNotes,{type:"notes",notes:this.state.notes,noteDeleted:this.noteDeleted,noteEdited:this.noteEdited}),React.createElement("h2",null,"Shared Notes"),React.createElement(AllNotes,{type:"readableNotes",notes:this.state.readableNotes,noteDeleted:this.noteDeleted,noteEdited:this.noteEdited}),React.createElement("h2",null,"Writable Shared Notes"),React.createElement(AllNotes,{type:"writableNotes",notes:this.state.writableNotes,noteDeleted:this.noteDeleted,noteEdited:this.noteEdited}),React.createElement("h2",null,"Note Permissions"),React.createElement(NewPermission,{notes:this.state.notes,receivePermission:this.receivePermission}),React.createElement(Permissions,{receivePermission:this.receivePermission,permissionEdited:this.permissionEdited,permissionDeleted:this.permissionDeleted,permissions:this.state.permissions}))}}),NewPermission=React.createClass({displayName:"NewPermission",getInitialState:function(){return{permission:1,permissionMessage:""}},submitPerm:function(){var e=this,t=this.refs.username.value,n=this.refs.noteID.value;$.ajax({url:"/api/permissions",type:"POST",beforeSend:$.rails.CSRFProtection,data:{permission:{level:this.state.permission,note_id:n},email:t},success:function(t,n,r){e.props.receivePermission(r),e.setState({permissionMessage:"Your permission was successfully created."})},error:function(){e.setState({permissionMessage:"There was an error. Check that the email address is correct."})}})},createSelectItems:function(){return this.props.notes.map(function(e){return React.createElement("option",{key:e.id,value:e.id},e.title)})},setPermissions:function(e){this.setState({permission:e.target.value})},render:function(){return React.createElement("div",null,React.createElement("div",{"class":"form_group"},React.createElement("label",{name:"username"},"Enter the username of the user to share a note with."),React.createElement("input",{name:"username",ref:"username",placeholder:"username"})),React.createElement("div",{"class":"form_group"},React.createElement("label",{name:"username",name:"note"},"Select a note to share."),React.createElement("select",{ref:"noteID",name:"note"},this.createSelectItems())),React.createElement("div",{onChange:this.setPermissions},React.createElement("label",{name:"level",name:"note"},"Select type of access."),React.createElement("input",{type:"radio",value:"1",name:"level"})," Read",React.createElement("input",{type:"radio",value:"2",name:"level"})," Write"),React.createElement("div",{"class":"form_group"},React.createElement("button",{onClick:this.submitPerm},"Submit")),React.createElement("div",{"class":"permission-message"},this.state.permissionMessage))}}),Note=React.createClass({displayName:"Note",getInitialState:function(){return{editable:!1}},editNote:function(){if("readableNotes"!=this.props.type){if(this.state.editable){var e=this.refs.title.value,t=this.refs.content.value,n=this.props.note.id,r={id:n,content:t,title:e};this.props.noteEdited(r,this.props.type)}this.setState({editable:!this.state.editable})}},renderButtons:function(){switch(this.props.type){case"readableNotes":return React.createElement("div",null);case"writableNotes":return React.createElement("button",{onClick:this.editNote},this.state.editable?"Submit":"Edit");default:return React.createElement("div",null,React.createElement("button",{onClick:this.editNote},this.state.editable?"Submit":"Edit"),React.createElement("button",{onClick:this.props.noteDeleted.bind(null,this.props.note.id)},"Delete"))}},render:function(){var e=this.state.editable?React.createElement("input",{ref:"title",type:"text",defaultValue:this.props.note.title}):React.createElement("h3",null,this.props.note.title),t=this.state.editable?React.createElement("input",{ref:"content",type:"text",defaultValue:this.props.note.content}):React.createElement("p",null,this.props.note.content);return React.createElement("div",{className:"note"},e,t,this.renderButtons())}}),NewNote=React.createClass({displayName:"NewNote",getInitialState:function(){return{noteMessage:""}},submitNote:function(){var e=this,t=this.refs.title.value,n=this.refs.content.value;$.ajax({url:"/api/notes",type:"POST",beforeSend:$.rails.CSRFProtection,data:{note:{title:t,content:n}},success:function(n){e.props.receiveNote(n),$(".new-note").find("input").val(""),e.setState({noteMessage:"Your note '"+t+"' has been created."})}})},render:function(){return React.createElement("div",null,React.createElement("div",{"class":"new-note"},React.createElement("input",{ref:"title",placeholder:"Enter the name of the item"}),React.createElement("input",{ref:"content",placeholder:"Enter a description"}),React.createElement("button",{onClick:this.submitNote},"Submit"),React.createElement("div",{"class":"note-message"},this.state.noteMessage)))}}),AllNotes=React.createClass({displayName:"AllNotes",render:function(){var e=this,t=this.props.notes.map(function(t){return React.createElement("div",{key:t.id},React.createElement("div",{className:"list-group-item"},React.createElement(Note,{type:e.props.type,note:t,noteDeleted:e.props.noteDeleted,noteEdited:e.props.noteEdited})))});return React.createElement("div",{className:"list-group"},t)}}),Permission=React.createClass({displayName:"Permission",getInitialState:function(){return{editable:!1}},showPerm:function(){return this.state.editable?React.createElement("div",null,React.createElement("label",{name:"level"},"Enter 1 for read permissions and 2 for write permissions"),React.createElement("input",{name:"level",ref:"permissionLevel",type:"integer",defaultValue:this.props.permission.level})):1==this.props.permission.level?"Read":"Write"},editPermission:function(){if(this.state.editable){var e=this.props.permission.id,t=this.refs.permissionLevel.value,n={id:e,level:t};this.props.permissionEdited(n)}this.setState({editable:!this.state.editable})},renderButtons:function(){return React.createElement("div",null,React.createElement("button",{onClick:this.editPermission},this.state.editable?"Submit":"Edit"),React.createElement("button",{onClick:this.props.permissionDeleted.bind(null,this.props.permission.id)},"DELETE"))},render:function(){return React.createElement("div",{className:"list-group-item"},React.createElement("div",null,this.props.permission.username),React.createElement("div",null,this.showPerm()),React.createElement("div",null,this.props.permission.title),this.renderButtons())}}),Permissions=React.createClass({displayName:"Permissions",render:function(){var e=this,t=this.props.permissions.map(function(t){return React.createElement(Permission,{permission:t,key:t.id,receivePermission:e.props.receivePermission,permissionEdited:e.props.permissionEdited,permissionDeleted:e.props.permissionDeleted})});return React.createElement("div",null,React.createElement("div",{className:"list-group"},t))}});